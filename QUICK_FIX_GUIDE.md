# 相機錄影問題快速修正

## 🚀 立即修正步驟

### 1. 重新編譯應用 (最重要)
由於我們修改了 `app.json` 中的權限配置，需要重新編譯：

```bash
# 停止當前的 expo 伺服器
# 清除快取並重新啟動
npx expo start --clear

# 或者如果上面不行，嘗試
npx expo start --clear --reset-cache
```

### 2. 檢查權限設置
確保在設備上手動授權權限：

**Android:**
1. 設定 → 應用 → Soul → 權限
2. 啟用「相機」和「麥克風」權限

**iOS:**
1. 設定 → 隱私權與安全性 → 相機 → Soul (開啟)
2. 設定 → 隱私權與安全性 → 麥克風 → Soul (開啟)

### 3. 使用診斷功能
1. 打開翻譯功能
2. 如果相機不工作，點擊底部的「診斷相機」按鈕
3. 查看診斷結果和建議

### 4. 重設相機狀態
如果相機卡在「準備中」狀態：
1. 點擊「重設相機」按鈕
2. 等待 5-10 秒
3. 如果仍然不工作，完全關閉並重新開啟應用

## 🔧 程式碼修正確認

已修正的問題：
- ✅ `diagnoseCameraIssues` 函數已正確定義
- ✅ 權限配置已添加到 app.json
- ✅ 相機狀態管理已增強
- ✅ 錯誤處理已改進

## 📱 測試錄影功能

1. 確保相機權限已授權
2. 打開翻譯功能
3. 等待「相機準備中...」消失
4. 點擊紅色錄影按鈕
5. 錄製 3-5 秒後點擊停止
6. 檢查是否生成影片預覽

## ⚠️ 如果仍然有問題

### 快速解決方案：
1. **完全重新安裝應用** (最有效)
2. **重新啟動設備**
3. **檢查設備存儲空間** (需要至少 500MB)
4. **確認沒有其他應用正在使用相機**

### 收集診斷信息：
1. 使用「詳細診斷」功能
2. 檢查控制台輸出
3. 記錄具體錯誤信息

## 🎯 常見錯誤和解決方案

| 錯誤信息 | 解決方案 |
|---------|---------|
| "Camera is not ready yet" | 等待更長時間或點擊重設相機 |
| "Permission denied" | 手動在設定中授權權限 |
| "diagnoseCameraIssues doesn't exist" | 已修正，重新編譯應用 |
| 相機黑屏 | 檢查其他應用是否占用相機 |
| 錄影立即停止 | 檢查存儲空間和權限 |

修正後的應用應該能夠正常錄影。如果問題持續存在，使用診斷工具收集更多資訊。